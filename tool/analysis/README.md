# Juvo AI Content Analysis Tool

This tool analyzes scraped social media posts using Google's Gemini AI to identify potential risks and safety concerns.

## Features

- **AI-Powered Analysis**: Uses Gemini 1.5 Pro for content analysis
- **Risk Assessment**: Scores content for grooming, trafficking, CSAM, and harassment risks
- **Batch Processing**: Process multiple files at once
- **Real-time Monitoring**: Watch folder for new files and process automatically
- **Structured Output**: Generates detailed JSON analysis reports
- **Media Analysis**: Processes associated media files and generates hashes

## Setup

1. Install dependencies:
```bash
npm install
```

2. Set your Gemini API key:
```bash
export GEMINI_API_KEY="your-api-key-here"
```

## Usage

### Batch Process All Files
Process all JSON files in the scraped_data folder:
```bash
node index.js batch
```

### Watch for New Files
Monitor the scraped_data folder and automatically process new files:
```bash
node index.js watch
```

### Process Single File
Analyze a specific JSON file:
```bash
node index.js single /path/to/file.json
```

### Run Test
Test the system with sample data:
```bash
node index.js test
```

## Input Format

The tool expects JSON files in the format generated by the post-scraper tool:

```json
{
  "postId": "123456789",
  "permalink": "https://www.facebook.com/...",
  "scrapedAt": "2025-07-15T10:00:00Z",
  "publishedAt": "2025-07-15T09:30:00Z",
  "fullText": "Post content here...",
  "mediaUrls": [...],
  "posterName": "User Name",
  "posterProfileId": "...",
  "posterProfileUrl": "..."
}
```

## Output Format

Analysis results are saved as JSON files in the `analyzed_data` folder with detailed risk assessments:

```json
{
  "analysis_id": "uuid",
  "source": {...},
  "post": {...},
  "actors": {...},
  "risk_scores": {
    "grooming": 0.76,
    "trafficking": 0.64,
    "csam": 0.12,
    "harassment": 0.05
  },
  "risk_level": "high",
  "flagged": true,
  "recommended_action": "alert_immediate",
  "priority_score": 92,
  "explanation": "Analysis explanation..."
}
```

## Risk Levels

- **low**: Minimal or no risk indicators detected
- **medium**: Some concerning patterns but not high-risk
- **high**: Clear risk indicators requiring attention
- **critical**: Immediate intervention required

## Recommended Actions

- **no_action**: Content appears safe
- **review**: Manual review recommended
- **alert**: Generate alert for moderators
- **alert_immediate**: Immediate action required

## File Structure

- `index.js` - Main entry point and CLI interface
- `content-analyzer.js` - Core analysis engine with Gemini integration
- `batch-processor.js` - Handles batch processing and file watching
- `package.json` - Dependencies and configuration